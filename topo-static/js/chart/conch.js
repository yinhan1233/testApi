(()=>{var Ht=Object.create;var N=Object.defineProperty;var Lt=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var Bt=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty;var qt=(s,t,e)=>t in s?N(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Ut=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var Kt=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Nt(t))!Rt.call(s,n)&&n!==e&&N(s,n,{get:()=>t[n],enumerable:!(i=Lt(t,n))||i.enumerable});return s};var z=(s,t,e)=>(e=s!=null?Ht(Bt(s)):{},Kt(t||!s||!s.__esModule?N(e,"default",{value:s,enumerable:!0}):e,s));var ht=(s,t,e)=>(qt(s,typeof t!="symbol"?t+"":t,e),e);var $=Ut((me,bt)=>{var yt=[["rgb(255, 255, 204)","rgb(222, 252, 205)","rgb(189, 249, 206)","rgb(157, 246, 207)","rgb(124, 242, 208)","rgb(91, 239, 209)"],["rgb(52, 255, 245)","rgb(49, 224, 242)","rgb(45, 192, 238)","rgb(42, 161, 235)","rgb(39, 130, 231)","rgb(35, 98, 228)"],["rgb(255, 220, 132)","rgb(255, 196, 124)","rgb(254, 171, 117)","rgb(254, 147, 109)","rgb(254, 123, 101)","rgb(253, 98, 94)"],["rgb(109, 212, 0)","rgb(91, 218, 39)","rgb(73, 224, 78)","rgb(55, 230, 117)","rgb(36, 235, 156)","rgb(18, 241, 195)"],["rgb(215, 74, 255)","rgb(198, 78, 255)","rgb(181, 82, 255)","rgb(164, 86, 255)","rgb(146, 90, 255)","rgb(129, 94, 255)"],["rgb(68, 215, 182)","rgb(99, 198, 159)","rgb(130, 182, 137)","rgb(162, 165, 114)","rgb(193, 148, 91)","rgb(224, 132, 69)"],["rgb(255, 87, 56)","rgb(239, 141, 122)","rgb(223, 196, 189)","rgb(207, 250, 255)","rgb(138, 214, 255)","rgb(69, 178, 255)"],["rgb(120, 69, 255)","rgb(165, 121, 251)","rgb(210, 173, 247)","rgb(255, 225, 243)","rgb(255, 170, 197)","rgb(255, 116, 151)"],["rgb(255, 104, 61)","rgb(255, 144, 122)","rgb(255, 185, 182)","rgb(255, 225, 243)","rgb(170, 209, 219)","rgb(85, 192, 196)"],["rgb(91, 11, 255)","rgb(146, 82, 251)","rgb(200, 154, 247)","rgb(255, 225, 243)","rgb(255, 170, 237)","rgb(255, 116, 231)"],["rgb(255, 112, 76)","rgb(255, 150, 132)","rgb(255, 187, 187)","rgb(255, 225, 243)","rgb(255, 204, 162)","rgb(255, 182, 81)"],["rgb(77, 177, 86)","rgb(136, 193, 138)","rgb(196, 209, 191)","rgb(255, 225, 243)","rgb(190, 197, 247)","rgb(126, 170, 251)"]];bt.exports={version:"2.0.0",globalVar:{themeColor:yt,scripts:{},async:!1},themeColor:yt}});function B(s){let t=parseInt(s.style.display==="none"?0:getComputedStyle(s).height);return Number.isNaN(t)?0:t}function ct(s,t){t.forEach(e=>{R(s.prototype,e.prototype)})}function R(s,t,e=!0){Object.getOwnPropertyNames(t).forEach(i=>{(!s[i]||s[i]&&e)&&(s[i]=t[i])})}function I(s={}){if(s){if(!Array.isArray(s)){let{top:t=0,right:e=0,bottom:i=0,left:n=0}=s;s=[t,e,i,n]}return s.map(t=>u(t)).join(" ")}return 0}function F(s,t=""){if(!s)return;let e=t.split("."),i;for(;i=e.shift();)if(s[i])s=s[i];else return null;return s}function S(s){if(!s||typeof s!="object")return s;let t=s instanceof Array?[]:{};for(let e in s)t[e]=typeof s[e]=="object"?S(s[e]):s[e];return t}function D(s,t){return typeof s!=typeof t&&console.warn("\u7EC4\u4EF6\u6570\u636E\u7C7B\u578B\u53D1\u751F\u66F4\u6539\u53EF\u80FD\u5B58\u5728\u9519\u8BEF"),s&&t&&!Array.isArray(s)&&!Array.isArray(t)&&typeof s=="object"&&typeof t=="object"?Object.assign(t,s):s}function q(s,t){!s||Object.entries(s).forEach(t)}var lt=s=>typeof s=="boolean",u=s=>`${s||0}px`,pt=s=>s.substring(0,1).toUpperCase()+s.substring(1),d=s=>typeof s=="function",v=s=>s==null;function ft(s,t){if(s==="1.0.0"||s==="2")return!0;let e=s.split("."),i=t.split("."),n=e.length,o=i.length,r=Math.min(n,o),a=0;for(a;a<r;a++){let h=parseInt(e[a]),l=parseInt(i[a]);if(h>l)return 1;if(h<l)return-1}if(n>o){for(let h=a;h<n;h++)if(parseInt(e[h])!=0)return 1;return 0}else if(n<o){for(let h=a;h<o;h++)if(parseInt(i[h])!=0)return-1;return 0}return 0}var ut=()=>({name:"\u84DD\u56FE\u8282\u70B9",group:"UI-Chart",inputs:[{name:"\u663E\u793A",type:"exec"},{name:"\u9690\u85CF",type:"exec"},{name:"\u6570\u636E",type:"any"}],outputs:[]}),U=class{static init(){let{options:t}=this.__richConfig;if(!t)t={};else if(typeof t=="string")try{t=new Function("return "+t)()}catch{throw t={},new Error("\u8F6C\u6362\u56FE\u8868json\u51FA\u73B0\u9519\u8BEF")}else t=S(t);if(Array.isArray(t)?t={blueprint:ut(),propertyPanel:t}:(!t.blueprint||Object.keys(t.blueprint).length<2)&&(t.blueprint=ut()),Array.isArray(t.propertyPanel)&&t.propertyPanel.length>0){let e={};(function(i){i.forEach(n=>{let o=e;if(n.key){let r=n.key.split(".");r.shift();for(let a=0;a<r.length;a++)a<r.length-1?(o[r[a]]||(o[r[a]]={name:r[a],type:"group",children:{}}),o=o[r[a]].children):(n.default=n.value,delete n.value,delete n.key,o[r[a]]=n)}else func(n.children)})})(t.propertyPanel),t.propertyPanel=e}this._options=t}getBlueprintNode(t,e){let i=this;return class extends BaseNode{static config={...i._options.blueprint,name:t||i._options.blueprint.name,id:e};constructor(){super()}isEntrance(){return!0}onExecute(o,r,a){i.onExecute(o,r,a,this)}onStop(){i.onStop(this)}}}onExecute(t,e,i,n){switch(n.curExecName){case"\u663E\u793A":this.show();break;case"\u9690\u85CF":this.hide();break}e._updateData_&&this.setData(e._updateData_)}onStop(){}},dt=U;function mt(s){return[s.text,{...s.font,textAlign:s.site,fontSize:u(s.font.fontSize),lineHeight:s.lineHeight?u(s.lineHeight):null,padding:I(s.padding)}]}function _t(s,t,e){s.innerHTML=t,e&&Object.assign(s.style,e)}var K=class{static init(){this.titleDom=document.createElement("div"),this.subTitleDom=document.createElement("div"),this.parentDom.appendChild(this.titleDom),Object.assign(this.titleDom.style,{flexShrink:0}),Object.assign(this.subTitleDom.style,{flexShrink:0}),this.parentDom.appendChild(this.subTitleDom)}__resizeParentHeight(){this.dom.style.height=`calc(100% - ${u(B(this.titleDom)+B(this.subTitleDom))})`}setTitle(t,e){_t(this.titleDom,t,e)}setSubTitle(t,e){_t(this.subTitleDom,t,e)}openTitle(){this.titleDom.style.display="block",this.resize()}closeTitle(){this.titleDom.style.display="none",this.resize()}openSubTitle(){this.subTitleDom.style.display="block",this.resize()}closeSubTitle(){this.subTitleDom.style.display="none",this.resize()}updateTitle(t){t&&(this.titleDom.style.display=t.show?"block":"none",this.setTitle(...mt(t)))}updateSubTitle(t){t&&(this.subTitleDom.style.display=t.show?"block":"none",this.setSubTitle(...mt(t)))}},gt=K;var wt=z($());var G=class{static init(){this.themes=wt.themeColor,this.themeIndex=1}__setPadding(t){this.padding!==t&&(this.padding=t),Object.assign(this.parentDom.style,{padding:I(t)})}setPadding(t){this.__setPadding(t),this.resize()}setCompBG(t=""){Object.assign(this.parentDom.style,{background:t,backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"})}setTheme(t){this.theme!==t&&(this.theme=t),this.render()}__updateTheme(t=this.theme){if(!!t)if(t.backgroundColor&&t.backgroundColor.show){let e=t.backgroundColor,{type:i,value:n}=e,o="";if(i==="image")e.url&&(o=`url(${e.url})`);else if(n)switch(i){case"flat":o=n;break;case"linearGradient":let{angle:r,stops:a}=n;o=`linear-gradient(${r}deg, ${a.map(h=>`${h.color} ${h.offset}%`).join(",")})`;break;case"radialGradient":o=`radial-gradient(${n.stops.map(h=>`${h.color} ${h.offset}%`).join(",")})`;break}this.setCompBG(o)}else this.setCompBG("")}__transform(){this.padding&&this.__setPadding(this.padding);let t=F(this.config||this.opts,"menu.title");if(t){let{title:e,subTitle:i}=t;this.updateTitle(e),this.updateSubTitle(i)}}},Ct=G;var W=class{constructor(t){this.identified=t,this.operations=[]}done(...t){this.operations=this.operations.concat(t.filter(e=>typeof e=="function"))}_run(...t){this.operations.forEach(e=>e(...t))}destroy(){this.identified=null,this.operations=null}},Ot=W;var X=class{constructor(t){this.actions={},this.instance=t}wait(t){return this.actions[t]?this.actions[t]:this.actions[t]=new Ot(t)}clearWait(){Object.values(this.actions).forEach(t=>t.destroy()),this.actions={}}trigger(t,...e){this.actions[t]&&this.actions[t]._run(...e)}},Dt=X;var J=class{static init(){this._waiter=new Dt(this)}trigger(...t){return this._waiter.trigger(...t)}_waitAction(t){return this._waiter.wait(t)}_clearWaitAction(){this._waiter.clearWait()}},xt=J;var Q=class{static init(){this._eventBus=new Map}$on(t,e){this._eventBus.set(t,e)}$emit(t,...e){let i=this._eventBus.get(t);i&&(e?i.apply(this,e):i.call(this))}$off(t){t?this._eventBus.delete(t):this._eventBus.clear()}$offAll(){this._eventBus=null}},P=Q;var St=z($());var C={script([s,t],e){return new Promise(i=>{let n=window.document.head.querySelector("#"+s);n?n.isLoading?i():n.addEventListener("load",()=>{i()}):(n=document.createElement("script"),n.src=(e||"")+t,n.type="text/javascript",n.isLoading=!1,n.addEventListener("load",()=>{n.isLoading=!0,i()}),n.addEventListener("error",()=>{i()}),n.id=s,window.document.head.appendChild(n))})},css([s,t],e){let i=window.document.head.querySelector("#"+s+"css");i||(i=document.createElement("link"),i.href=(e||"")+t,i.rel="stylesheet",i.id=s+"css",window.document.head.appendChild(i))},font(s,t){return new Promise(async e=>{let i=Array.from(window.document.fonts.values());for(let n=0;n<s.length;n++){let{file:o,psName:r}=s[n];if(i.some(h=>h.family===r))return;let a=new window.FontFace(r,`url('${t}/fonts/${o}')`);a.load().then(h=>{window.document.fonts.add(h)}),await a.loaded}e()})},style(s,t=""){let e=document.head.querySelector("#styles_comp_global_"+t);e||(e=document.createElement("style"),e.type="text/css",e.id="styles_comp_global_"+t,e.appendChild(document.createTextNode(s)),document.head.appendChild(e)),t||e.appendChild(document.createTextNode(s))}};var Y=class{async __initScript(){let{script:t}=this.__richConfig,e=this._config.prefix||"";if(!St.globalVar.async&&t){this.script=t,this._config&&this._config.script&&Object.entries(this._config.script).forEach(([o,r])=>{this.script[o]=r});let i=Object.entries(this.script).filter(([o,r])=>typeof r=="string"),n=i.shift();for(;n;)await C.script(n,e),n=i.shift()}}__initResource(){let{img:t,fonts:e,css:i,script:n}=this.__richConfig,o=this._config.prefix||"";e&&C.font(Object.values(e),o),this.img={},this.fonts={},q(t,([r,a])=>{this.img[r]=(o||"")+a}),q(e,([r,a])=>{this.fonts[r]=a.file}),i&&Object.entries(this.css=i).filter(([r,a])=>typeof a=="string").forEach(r=>{C.css(r,o)}),this.script=n}},Et=Y;var Gt=["create","mounted","update","dataChange","optsChange","destory"],V=class{static init(){this.__LifeCycle={},d(this.setup)&&(this.__getDom=this.setup())}__callHook(t,e){return this.__LifeCycle[t]?this.__LifeCycle[t].reduce((i,n)=>n(i),e):e}};Gt.forEach(s=>{s=pt(s),[`onBefore${s}`,`onAfter${s}`].forEach(t=>{V.prototype[t]=function(e){d(e)&&(this.__LifeCycle[t]||(this.__LifeCycle[t]=[]),this.__LifeCycle[t].push(e))}})});var jt=V;var Z=class{changeOptsToConfig(t=!0){if(this.type==="complex"){this._componentInstances.forEach((i,n)=>{i.changeOptsToConfig(t),this.updateConfig(i,n)});return}if(!this.opts||!this._options.propertyPanel||Object.prototype.toString.call(this._options.propertyPanel).slice(8,-1)!=="Array")return;let e=i=>{if(i.type==="group")for(let n of i.children)e(n);else{if(!(typeof i.key=="string"&&i.key!==""))return;let n=i.key.split(".");n.length>=1&&n.shift();let o=this.opts,r=o,a="";for(a of n)if(r=o,o=o[a],o===void 0||isNaN(o)){o=void 0;break}(o!==void 0||!isNaN(o))&&(t?i.value=o:r[a]=i.value)}};for(let i of this._options.propertyPanel)e(i);t||this.setOption(this.opts)}changeConfigToOpts(){this.changeOptsToConfig(!1)}changeOptsToPropertyPanel(t){if(this.type==="complex"){this._componentInstances.forEach((r,a)=>{r.changeOptsToPropertyPanel(this.opts[a]),this.updateConfig(r,a)});return}let e=this._options.propertyPanel||{},i=t||(this.type==="echarts"?this.config:this.opts);if(Object.prototype.toString.call(i).slice(8,-1)!=="Object"){console.warn("opts\u9700\u8981\u662F\u5BF9\u8C61\u7C7B\u578B\u7684\u6570\u636E");return}Object.keys(i).forEach(r=>{o(r,e,i)});function o(r,a,h){let l=a,c=h;Object.prototype.toString.call(c[r]).slice(8,-1)==="Object"?(c=c[r],l[r]&&l[r].children?l=l[r].children:l[r]&&l[r].default&&!l[r].children&&(l[r].default=c),Object.keys(c).forEach(f=>{o(f,l,c)})):l[r]&&l[r].default!==void 0&&(l[r].default=c[r])}}changePropertyPanelToOpts(){if(this.type==="complex")return this._componentInstances.map((r,a)=>{let h=r.changePropertyPanelToOpts();return this.updateConfig(r,a),h});let t=this._options.propertyPanel||{},e=this.type==="echarts"?this.config:this.opts;Object.keys(t).forEach(o=>{n(o,t,e)});function n(o,r,a){let h=r,l=a;!h[o].default&&h[o].children&&l[o]?(l=l[o],h=h[o].children,Object.keys(h).forEach(_=>{n(_,h,l)})):l.hasOwnProperty(o)&&(l[o]=h[o].default)}return this.setOption(e),e}changeProperty(t,e,i,n){this.setOption(i)}},vt=Z;var Tt=z($());var Wt={info:"background:#606060;color:#fff;",warn:"background:#E9A400;color:#fff;",error:"background:#EC3941;color:#fff;"};function Xt(s){return[Wt[s],"background:#1375B2;color:#fff;"]}function Jt(){let s=new Date;return`${s.toLocaleDateString()} ${s.toLocaleTimeString()}`}var tt=class{info(...t){this._recordLog("info",...t)}warn(...t){this._recordLog("warn",...t)}error(...t){this._recordLog("error",...t)}_recordLog(t,...e){window.console[t](`%c [conch ${t}] %c ${Jt()} `,...Xt(t),...e)}memory(){let{memory:t}=performance;if(t){let e=r=>`${r/1024/1024}M`,{jsHeapSizeLimit:i,totalJSHeapSize:n,usedJSHeapSize:o}=t;console.table({max:e(i),has:e(n),used:e(o)})}}},$t=new tt;var Pt=new P;P.init.call(Pt);var O=Pt;var kt=new WeakMap,E=class{static __richComp(t){let e=t.prototype,i=e.destroy;e.destroy=function(){this.__callHook("onBeforeDestory"),(d(i)?function(){this.__destroy(),i.call(this)}:this.__destroy).call(this),this.__callHook("onAfterDestory"),this._clearWaitAction(),this.$offAll()},e.render=e.__initRender;let n=e.setData;e.setData=function(r,...a){let h=this.__callHook("onBeforeDataChange",r);v(h)&&(r=h),n&&n.call(this,r,...a),this.__callHook("onAfterDataChange")};let o=e.setOption;e.setOption=function(r,...a){let h=this.__callHook("onBeforeOptsChange",r);v(h)&&(r=h),o&&o.call(this,r,...a),this.__callHook("onAfterOptsChange")}}static __use(t){ct(E,E.used=t)}constructor(t,e={}){for(e.prefix||(e.prefix="");!e.fromComplex&&t.hasChildNodes();)t.removeChild(t.firstChild);if(e.fromComplex&&e.select){let h=e.select[e._id];h&&(t.style.border=h)}this.log=$t,this._config=e,this.root=O;let i=this._config.prefix;this._registerImg&&this._registerImg(i),this.parentDom=t,Object.assign(t.style,{transformOrigin:"0 0",display:"flex",flexDirection:"column"});let n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.boxSizing="border-box";let{key:o,width:r,height:a}=this.__richConfig;this.size={width:r,height:a},this._key=o,this.__setClassName(),Array.isArray(E.used)&&E.used.forEach(h=>h.init&&h.init.call(this)),this.__initResource(),t.appendChild(this.dom=n)}get instance(){return kt.get(this)}set instance(t){t&&kt.set(this,t)}show(){this.parent?this.parent.show():this.parentDom.style.display="block"}hide(){this.parent?this.parent.hidden():this.parentDom.style.display="none"}hidden(){this.hide()}toJSON(){return{data:this.data,opts:this.type==="echarts"?this.config:this.opts,theme:this.theme,padding:this.padding,events:this.events}}__setClassName(){this.parentDom.classList.contains(this._key)||this.parentDom.classList.add(this._key)}async __initComp(){this.__callHook("onBeforeCreate"),Tt.globalVar.async?this.__initScript():await this.__initScript(),this.__initConfig(),this.__callHook("onAfterCreate"),this.created&&this.created(),this._isLoadingComp=!0,this.cb&&this.cb(),this.cb=null}__initConfig(){this._options&&(!this.data&&this._options.data&&(this.data=S(this._options.data)),!this.opts&&this._options.options&&(this.opts=S(this._options.options)));let{theme:t,padding:e,data:i,opts:n,events:o}=this._config.config||{};t&&(this.theme=t),e&&(this.padding=e),i&&(this.data=i),o&&(this.events=o),d(this.__mergeVueInstData)&&this.__mergeVueInstData(),n&&(this.type==="echarts"?this.config=n:this.opts=n)}__initRender(){return new Promise(t=>{let e=async()=>{try{this.__setClassName(),this.__updateTheme(),this.transformOptions&&this.transform(),this.__transform(),this.instance||this._instance?(this.__callHook("onBeforeUpdate"),this.__update(),this.__callHook("onAfterUpdate"),this.updated&&this.updated()):(this.__callHook("onBeforeMounted"),await this.__render(),this.__callHook("onAfterMounted"),this.mounted&&this.mounted())}catch(i){console.error(i),console.error(this._compId+"\u56FE\u8868\u6267\u884C\u9519\u8BEF")}finally{t()}};this._isLoadingComp?e():this.cb=e})}},k=E;ht(k,"used");k.__use([dt,gt,Ct,xt,P,Et,jt,vt]);var y=k;var et=class{constructor(t){this.instance=t||{},this.typeFnMapping={showOrHidden:this.__doShowOrHidden.bind(this),changeOptions:this.__doSetOptions.bind(this),callback:this.__doCallback.bind(this),secondFunction:this._doSecondFunction.bind(this),link:this.__doLink}}_registerType(t,e,i){if(typeof e!="function")return;let n=i||this;this.typeFnMapping[t]=e.bind(n)}__run(t,e){e.forEach(i=>{t._waitAction(i.identified).done(o=>{Qt(i.condition,o)&&(this._beforeRun&&this._beforeRun({events:i,data:o}),i.actions.forEach(a=>{this.__runAction(a,o)}),this._afterRun&&this._afterRun({events:i,data:o}))})})}__runAction(t,e){for(let i in t)if(i!=="type"){if(!this.typeFnMapping[i]){console.error(`\u4E8B\u4EF6\u52A8\u4F5C${i}\u672A\u6CE8\u518C`);return}this.typeFnMapping[i](t[i],e)}}_query(t){return typeof this.instance.query!="function"?null:Array.isArray(t)?t.map(e=>this.instance.query(e)):this.instance.query(t)}__doShowOrHidden(t){let{showComps:e,hiddenComps:i}=t;e.forEach(n=>{let o=this._query(n);o&&o.show()}),i.forEach(n=>{let o=this._query(n);o&&o.hidden()})}__doSetOptions(t){let{comp:e,opts:i}=t,n=this._query(e);n&&n.setOption(i)}__doLink(t){!t.url||se(t.url)||window.open(t.url)}__doCallback(){}_doSecondFunction(t){let{name:e,arg:i}=t;this.instance[e]&&this.instance[e](i)}};function Qt(s,t){if(s.enabled===!1)return!0;switch(s.type){case"code":return Yt(s.filterCode,t);case"tree":return Zt(s,t);default:return!0}}function Yt(s,t){return new Function("data",s)(t)}function Zt(s,t){return At(s,e=>At(e,i=>ee(t,...i)))}function At(s,t){let e=te(s.operator);return s.expressions.length?e.call(s.expressions,t):!0}function te(s){switch(s){case"OR":return Array.prototype.some;case"AND":return Array.prototype.every;default:return()=>!1}}function ee(s,t,e,i){let o=(s||{})[t];if(o==null||o==="")return!1;switch(e==="eq"||e==="in"||e==="nin"?(o=o.toString(),i=i.toString()):(o=o*1,i=i*1),e){case"eq":return o===i;case"gt":return o>i;case"lt":return o<i;case"gte":return o>=i;case"lte":return o<=i;case"ne":return o!==i;case"in":return o.toString().includes(i.toString());case"nin":return!o.toString().includes(i.toString())}}function se(s){return!/(http|https):\/\/([\w.]+\/?)\S*/.test(s)}var M=et;var zt=({prefix:s,status:t})=>{switch(t){case"component":return{js:`${s}/component-source`,def:`${s}/complex-group-def`};default:return{js:`${s}/component`,def:`${s}/complex-group-version-def`}}};function ie(s,t){let e=s.indexOf("C")>-1?s.slice(1):s,i=zt(t).def;return new Promise(n=>{fetch(`${i}/${e}.def`).then(o=>o.json()).then(o=>{n(o)}).catch(o=>console.error("Request Failed",o))})}function ne(s){let t=F(s,"scene.option.style")||{},e={},i=[],n=[],o=[],r=[],a=[],h=[],l=[],c=s.scene.children[0],_=c.children||[],f=s.userData,m=[..._];if(c.option.visible!==!1)for(;m.length;){let g=m.shift();if(g.children)g.option.visible!==!1&&m.push(...g.children);else if(g.option.visible!==!1&&g.type==="Container"){let p=f[g.option.id],x=p.name.substr(1);h.push(x),i.push(p.data),n.push(p.opts),o.push(p.theme),a.push(p.padding),r.push(p.events);let A={title:g.option.name,id:x},w=g.option.style;w&&Object.assign(A,e[x]={width:w.width,height:w.height,top:w.top,left:w.left,backgroundColor:w.backgroundColor||"",rotate:`rotate(${w.rotate||0}deg)`}),l.push(A)}}return{width:t.width||"",height:t.height||"",childStyle:e,datas:i,opts:n,component:h,simpleCompInfo:l,themes:o,paddings:a,events:r}}var st=class extends y{constructor(t,e){super(t,e),this.__initComp()}async __initComp(){this.customEvent=new M(this),this.useResizeScale=lt(this.useResizeScale)?this.useResizeScale:!0,this._componentInstances=[],this._options=[];let t=ne(await ie(this._compId,this._config));this.events=t.events||[],this.simpleCompInfo=t.simpleCompInfo,this.data=t.datas,this.opts=t.opts;let e=this.childStyle=t.childStyle,i=t.themes,n=t.paddings;this.parentDom.style.width=u(t.width),this.parentDom.style.height=u(t.height),this.dom.style.position="relative",this.resize();let o=zt(this._config).js,r=this._config.status==="component"?"src":"";await Promise.all(t.component.map(a=>C.script([`C${a}`,`${o}/${a}${r}.js`]))),t.component.forEach((a,h)=>{let l=`C${a}`,c=document.createElement("div"),_=document.createElement("div");if(c.appendChild(_),this.dom.appendChild(c),e[a]){let f=e[a];Object.assign(_.style,{width:u(f.width),height:u(f.height)}),Object.assign(c.style,{position:"absolute",top:u(f.top),left:u(f.left),width:u(f.width),height:u(f.height),transform:f.rotate,backgroundColor:f.backgroundColor})}this._config.config={theme:i[h],padding:n[h],data:this.data[h],opts:this.opts[h],events:this.events[h]};try{let f=new window.conch[l](_,{fromComplex:!0,_id:a,...this._config});f.complexInstance=this,this._componentInstances.push(f),this._options.push(f._options)}catch(f){console.error(f),this.loadCompError({boundDom:c,graphDom:_,id:a})}}),this._config.config=null,await super.__initComp()}__render(){return Promise.all(this._componentInstances.map(async(t,e)=>{await t.render(),this.events[e]&&this.customEvent.__run(t,this.events[e])}))}__update(){this.eachInstance("__update")}__destroy(){this.eachInstance("destroy")}resize(){if(this.useResizeScale){let{width:t,height:e}=this.size,i=getComputedStyle(this.parentDom);this.parentDom.style.transform=`scale(${Math.min(parseInt(i.width)/t,parseInt(i.height)/e)})`,this.parentDom.style.width=u(t),this.parentDom.style.height=u(e)}}setData(t){this.eachInstance((e,i)=>{let n=t[i];n&&e.setData(n)})}setOption(t){this.eachInstance((e,i)=>{let n=t[i];n&&e.setOption(n)})}transform(){this.eachInstance("transform"),this.__transform()}__changeTitleDOM(t,e,i){super.__changeTitleDOM(t,e,i),this.__resizeParentHeight()}eachInstance(t){this._componentInstances.forEach((e,i)=>{typeof t=="string"?this[t].call(e):t(e,i)})}query(t){return t&&this._componentInstances.find(e=>e._config._id===t)}updateComponentStyle({width:t,height:e,backgroundColor:i,left:n,top:o,id:r}){let a=this.query(r);if(a){let h=a.dom.parentNode,l=h.parentNode;typeof t=="number"&&(h.style.width=l.style.width=u(t)),typeof e=="number"&&(h.style.height=l.style.height=u(e)),a.resize(),typeof i=="string"&&(h.style.backgroundColor=i),typeof n=="number"&&(l.style.left=u(n)),typeof o=="number"&&(l.style.top=u(o))}}updateConfig(t,e){e===0&&(this._options=[]),this._options.push(t._options)}loadCompError(t){let{boundDom:e,graphDom:i,id:n}=t,o=this.childStyle;o[n]&&(i.style.width=o[n].width,i.style.height=o[n].height,i.style.border="1px dashed red",e.style.position="absolute",e.style.top=o[n].top,e.style.left=o[n].left),i.innerHTML='<span style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); color: red">Error: \u56FE\u8868\u52A0\u8F7D\u5931\u8D25</span>'}},T=st;var it=class extends y{constructor(t,e){super(t,e),this.__initComp()}__render(){(this.instance=window.echarts.init(this.dom)).setOption(this.opts)}__update(){this.instance.clear(),this.instance.setOption(this.opts)}__destroy(){this.instance&&window.echarts.dispose(this.instance)}resize(){this.instance&&this.instance.resize()}setOption(t){if(this.config&&Object.prototype.toString.call(this.config).slice(8,-1)==="Object"){this.config=t,this.render();return}if(!this.instance)return;this.instance.setOption(t);let e={};Object.entries(this.instance._model._optionManager.mountOption()).forEach(([i,n])=>{if(n!=null){let o=JSON.stringify(n);if(o==="{}"||o==="[]")return;e[i]=n}}),this.opts=e}setData(t){if(this.config&&typeof this.config=="object"){this.data=D(t,this.data),this.render();return}if(t&&typeof t=="object"){let e=this.opts.series;if(Array.isArray(t)){if(t.length===0)return;let i;t[0].key&&t[0].value?(t=t.filter(n=>n.key&&n.value),i=n=>e.find(o=>o.name===n)):i=(n,o)=>e[o],t.forEach(({key:n,value:o},r)=>{let a=i(n,r);a&&(a.data=o)})}else Object.keys(t).forEach(i=>{let n=e.find(o=>o.name===i);n&&(n.data=t[i])});this.data=D(t,this.data),this.render()}}transform(){this.opts=this.transformOptions()}},H=it;var oe=s=>{if(!s)throw new Error("\u627E\u4E0D\u5230 vue \u73AF\u5883");return s},nt=class extends y{static __richComp(t){let e=t.prototype;e.__getDom=e.render,super.__richComp(t)}constructor(t,e){window.conch.registerVue(e.Vue),super(t,e),this.__initComp()}__render(){let t=oe(window.conch.Vue||window.Vue),e=20,i=performance.now();this.instance=new t({el:this.dom,render:n=>{if(e<=0){let o="[conch error] \u56FE\u8868\u88AB\u91CD\u590D\u6E32\u67D3\uFF0C\u8BF7\u6CE8\u610F";throw console.error(o),new Error(o)}return performance.now()-i<20?e-=1:e=20,this.$createElement=n,this.__getDom(n,this.data,this.opts)}}),this.dom=this.instance.$el}__update(){this.instance.$forceUpdate()}__destroy(){this.instance.$destroy()}resize(){this.useResizeScale&&(this.parentDom.style.width="100%",this.parentDom.style.height="100%")}setData(t,e){this.data=D(t,this.data),this.instance&&this.render()}setOption(t,e){this.opts=D(t,this.opts),this.instance&&this.render()}transform(){this.transformOptions()}__changeTitleDOM(t,e,i){super.__changeTitleDOM(t,e,i),this.__resizeParentHeight()}},L=nt;var re={default:L,echarts:H,complex:T},ot=class extends y{static __richComp(t){let e=t.prototype;e.__getDom=e.render,e.render=e.__initRender;let i=e.destroy;e.destroy=function(){(d(i)?function(){this.__destroy(),i.call(this)}:this.__destroy).call(this)}}constructor(t,e={}){super(t,e),this.type=this.type||"default",window.conch.registerVue(this._config.Vue);let i=["setData","setOption"],n={};i=i.filter(o=>{let r=typeof this[o]!="function";return r&&(this[o]=function(a){n[o]=a}),r}),setTimeout(()=>{i.forEach(o=>{this[o]=null}),R(this,re[this.type].prototype,!1),this.type==="complex"?T.prototype.__initComp.call(this):this.__initComp(),Object.entries(n).forEach(([o,r])=>{this[o].call(this,r)})})}},It=ot;function b(s,t){if(!(this instanceof b))return new b(s,t);this.proto=s,this.target=t,this.methods=[],this.getters=[],this.setters=[],this.fluents=[]}b.auto=function(s,t,e){for(var i=b(s,e),n=Object.getOwnPropertyNames(t),o=0;o<n.length;o++){var r=n[o],a=Object.getOwnPropertyDescriptor(t,r);if(a.get&&i.getter(r),a.set&&i.setter(r),a.hasOwnProperty("value")){var h=a.value;h instanceof Function?i.method(r):i.getter(r),a.writable&&i.setter(r)}}};b.prototype.method=function(s){var t=this.proto,e=this.target;return this.methods.push(s),t[s]=function(){return this[e][s].apply(this[e],arguments)},this};b.prototype.access=function(s){return this.getter(s).setter(s)};b.prototype.getter=function(s){var t=this.proto,e=this.target;return this.getters.push(s),t.__defineGetter__(s,function(){return this[e][s]}),this};b.prototype.setter=function(s){var t=this.proto,e=this.target;return this.setters.push(s),t.__defineSetter__(s,function(i){return this[e][s]=i}),this};b.prototype.fluent=function(s){var t=this.proto,e=this.target;return this.fluents.push(s),t[s]=function(i){return typeof i<"u"?(this[e][s]=i,this):this[e][s]},this};var Ft=b;var ae=s=>{if(!s)throw new Error("\u627E\u4E0D\u5230 vue \u73AF\u5883");return s},rt=class extends y{static __richComp(t){super.__richComp(t)}constructor(t,e){window.conch.registerVue(e.Vue),super(t,e),this.__initComp(),this.useResizeScale=!1}__mergeVueInstData(){let t={};for(let r in this)!d(this[r])&&(t[r]=this[r]);let{data:e}=this.vueInstConfig,i=d(e)?e():e,n={...i,...t,type:i?.type||"vueSFC"};Object.assign(this,n);let o=n.type==="echarts";return this.__instanceKey=`${o?"_":""}instance`,n}__initChart(t,e){return this.opts=e,(this.instance=window.echarts.init(t)).setOption(e),this.instance}__updateChart(t){this.instance&&(this.instance.clear(),this.instance.setOption(t))}__vueInstMounted(t,e){return function(){let i;if(this.transformOptions)i=this.transformOptions();else throw new Error("echarts\u7C7B\u7EC4\u4EF6\u9700\u5B9E\u73B0transformOptions\u65B9\u6CD5");t&&(this.instance=t(this.$refs.echarts||this.$el,i)),e&&e.call(this)}}__render(){let t=ae(window.conch.Vue||window.Vue),e=new Map([["resize",!0]]),i=new Map([["dom",!0]]),n=new Map([["setData","data"],["setOption","opts"],["setTheme","theme"]]),o=this.__mergeVueInstData(),r=function(){return{...o}},{data:a,mounted:h,...l}=this.vueInstConfig,c=this.__instanceKey,_=this.type==="echarts",f=this.__initChart.bind(this);this[c]=new t({el:this.dom,data:r,mounted:_?this.__vueInstMounted(f,h):h,...l});let m=this.render.bind(this);this.type==="echarts"?(this[c].$watch("config",m),this[c].$watch("theme",m),this[c].$watch("data",m),this[c].$watch("padding",m)):(this[c].$watch("opts",m),this[c].$watch("theme",m),this[c].$watch("data",m),this[c].$watch("padding",m)),this.dom=this[c].$el;for(let p in this){let x=d(this[p]);if(v(this[c][p]))x&&(this[c][p]=this[p].bind(this));else{if(n.has(p)){let A=this[c][p],w=function(...Mt){A.apply(this,Mt),this.render()};this[c][p]=w.bind(this[c])}e.has(p)||x&&(this[p]=this[c][p].bind(this[c]))}}this.render();let g=new Ft(this,c);for(let p in this[c])i.has(p)||!n.has(p)&&!e.has(p)&&(d(this[c][p])?g.method(p):g.access(p))}__update(){let t=this.__instanceKey;this[t]?.$forceUpdate(),this.type==="echarts"&&this.__updateChart(this.opts),this.__transform()}__destroy(){let t=this.__instanceKey;this[t]?.$destroy()}resize(){this.type==="echarts"?typeof this._instance?.resize=="function"?this._instance.resize():this.instance&&this.instance.resize():!(typeof this.instance?.resize=="function")&&this.useResizeScale?(this.parentDom.style.width="100%",this.parentDom.style.height="100%"):this.instance.resize()}setData(t){let e=this.__instanceKey;if(!this[e]){this.data=t;return}this.data=D(t,this[e].data),this[e].data=this.data,this[e]&&this.render()}setOption(t){let e=this.__instanceKey;if(!this[e]){this.opts=t;return}this.config&&Object.prototype.toString.call(this.config).slice(8,-1)==="Object"?(this.config={...this[e].config,...t},this[e].config=this.config):(this.opts={...this[e].opts,...t},this[e].opts=this.opts),this[e]&&this.render()}setTheme(t){let e=this.__instanceKey;if(!this[e]){this.theme=t;return}this.theme={...this[e].theme,...t},this[e].theme=this.theme,this.render()}transform(){this.opts=this.transformOptions()}__changeTitleDOM(t,e,i){super.__changeTitleDOM(t,e,i),this.__resizeParentHeight()}},Vt=rt;var at={Default:L,Complex:T,Echarts:H,OldBase:It,VueSFC:Vt};var j=z($());console.log("compile version is "+j.version);window.conch={version:j.version,Vue:null,__globalVar:j.globalVar,Base:at.OldBase,CustomEvent:M,...at,createCss:C.style,$on:O.$on.bind(O),$emit:O.$emit.bind(O),$off:O.$off.bind(O),install(s){this.Vue=s},register(s,t,e,i,n="default",o="1"){ft(o,j.version)===1&&console.error(`\u5F53\u524D\u7EC4\u4EF6${s}\u7248\u672C\u9AD8\u4E8E\u8FD0\u884C\u7248\u672C\uFF0C\u9700\u8981\u5347\u7EA7\u7EC4\u4EF6\u8FD0\u884C\u73AF\u5883`),i&&this.registerVue(i),e.script&&(this.__globalVar.scripts=Object.assign(this.__globalVar.scripts,e.script)),t.prototype.version=o,t.prototype.__richConfig=e,t.prototype._compId=s,t.__richComp(t,s,e),this[s]=t},registerVue(s){s&&(!this.Vue&&(this.Vue=s),!window.Vue&&(window.Vue=s))},async loadAllScript(){this.__globalVar.async=!0;let s=Object.entries(this.__globalVar.scripts).filter(([t,e])=>typeof e=="string");await Promise.all(s.map(t=>C.script(t,prefix)))}};})();
